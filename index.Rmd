---
title       : Most dangerous phenomena in USA
subtitle    : How natural disasters have affected USA along history?
author      : agomariz
job         : 
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
ext_widgets : {rCharts: [libraries/nvd3]}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

## Natural disasters viewer

In this work we analyze some of the most important natural disasters.
We visualize their influence by both:

1. Damage to the population (injured and/or dead people)
2. Economic damage in million USD (crop and property damages)

This information can be seen either:
- By years
- By states

--- .class #id 

## Overall information about population impact in USA

```{r, echo=FALSE}
library(data.table)
library(rCharts)
library(reshape2)

dt <- fread('./data/events_of_interest.csv')
dt.by.year <- dt[, list(Count=sum(COUNT), Injuries=sum(INJURIES), Fatalities=sum(FATALITIES), Properties = sum(PROPERTY.VALUE)/1000000,Crops = sum(CROP.VALUE)/1000000), by=list(YEAR)]
```
### From 1950 to 2011:
### - Number of deaths `r format(sum(dt$FATALITIES), big.mark=' ')`
### - Number of injuries `r format(sum(dt$INJURIES), big.mark=' ')`

## Overall information about economical impact in USA

### Within the same period (1950-2011):
### - $`r format(round(sum(dt$PROPERTY.VALUE)/1000000), big.mark=' ')` million of costs in **property damages**

### - $`r format(round(sum(dt$CROP.VALUE)/1000000), big.mark=' ')` million of costs in **crop damages**

--- .class #id 

## Great charts can be generated by this viewer

### E.g:

```{r nvd3plot2, results = 'asis', comment = NA, message = F, echo = F}
library(knitr)
data <- melt(dt.by.year[, list(Year=YEAR, Properties=Properties, Crops=Crops)], id="Year")
economicDamage <- nPlot(
    value ~ Year, group = 'variable', data = data[order(-Year, variable, decreasing = T)],
    type = 'stackedAreaChart', dom = 'economicDamage'
)
        
economicDamage$chart(margin = list(left = 100))
economicDamage$yAxis(axisLabel = "Economical damage", width = 80)
economicDamage$xAxis(axisLabel = "Year", width = 70)
        
economicDamage
```
---

## More info?
- This is a peer assigment of Coursera's course Developing data products
- You can visit the shinyapp [(http://agomariz.shinyapps.io/shiny)](http://agomariz.shinyapps.io/shiny)
- Both the code and the slides are availables on ([https://github.com/agomariz/DevelopingDataProducts/](https://github.com/agomariz/DevelopingDataProducts/))
